{"version":3,"sources":["../../test/index.ts","../../src/test/not-implemented.ts","../../src/test/mock-embedding-model-v3.ts","../../src/test/mock-image-model-v3.ts","../../src/test/mock-language-model-v3.ts","../../src/test/mock-provider-v3.ts","../../src/test/mock-speech-model-v3.ts","../../src/test/mock-transcription-model-v3.ts","../../src/test/mock-reranking-model-v3.ts","../../src/test/mock-values.ts","../../src/util/simulate-readable-stream.ts"],"sourcesContent":["export {\n  convertArrayToAsyncIterable,\n  convertArrayToReadableStream,\n  convertReadableStreamToArray,\n  mockId,\n} from '@ai-sdk/provider-utils/test';\nexport { MockEmbeddingModelV3 } from '../src/test/mock-embedding-model-v3';\nexport { MockImageModelV3 } from '../src/test/mock-image-model-v3';\nexport { MockLanguageModelV3 } from '../src/test/mock-language-model-v3';\nexport { MockProviderV3 } from '../src/test/mock-provider-v3';\nexport { MockSpeechModelV3 } from '../src/test/mock-speech-model-v3';\nexport { MockTranscriptionModelV3 } from '../src/test/mock-transcription-model-v3';\nexport { MockRerankingModelV3 } from '../src/test/mock-reranking-model-v3';\nexport { mockValues } from '../src/test/mock-values';\n\nimport { simulateReadableStream as originalSimulateReadableStream } from '../src/util/simulate-readable-stream';\n\n/**\n * @deprecated Use `simulateReadableStream` from `ai` instead.\n */\nexport const simulateReadableStream = originalSimulateReadableStream;\n","export function notImplemented(): never {\n  throw new Error('Not implemented');\n}\n","import { EmbeddingModelV3 } from '@ai-sdk/provider';\nimport { notImplemented } from './not-implemented';\n\nexport class MockEmbeddingModelV3 implements EmbeddingModelV3 {\n  readonly specificationVersion = 'v3';\n\n  readonly provider: EmbeddingModelV3['provider'];\n  readonly modelId: EmbeddingModelV3['modelId'];\n  readonly maxEmbeddingsPerCall: EmbeddingModelV3['maxEmbeddingsPerCall'];\n  readonly supportsParallelCalls: EmbeddingModelV3['supportsParallelCalls'];\n\n  doEmbed: EmbeddingModelV3['doEmbed'];\n\n  doEmbedCalls: Parameters<EmbeddingModelV3['doEmbed']>[0][] = [];\n\n  constructor({\n    provider = 'mock-provider',\n    modelId = 'mock-model-id',\n    maxEmbeddingsPerCall = 1,\n    supportsParallelCalls = false,\n    doEmbed = notImplemented,\n  }: {\n    provider?: EmbeddingModelV3['provider'];\n    modelId?: EmbeddingModelV3['modelId'];\n    maxEmbeddingsPerCall?: EmbeddingModelV3['maxEmbeddingsPerCall'] | null;\n    supportsParallelCalls?: EmbeddingModelV3['supportsParallelCalls'];\n    doEmbed?:\n      | EmbeddingModelV3['doEmbed']\n      | Awaited<ReturnType<EmbeddingModelV3['doEmbed']>>\n      | Awaited<ReturnType<EmbeddingModelV3['doEmbed']>>[];\n  } = {}) {\n    this.provider = provider;\n    this.modelId = modelId;\n    this.maxEmbeddingsPerCall = maxEmbeddingsPerCall ?? undefined;\n    this.supportsParallelCalls = supportsParallelCalls;\n    this.doEmbed = async options => {\n      this.doEmbedCalls.push(options);\n\n      if (typeof doEmbed === 'function') {\n        return doEmbed(options);\n      } else if (Array.isArray(doEmbed)) {\n        return doEmbed[this.doEmbedCalls.length];\n      } else {\n        return doEmbed;\n      }\n    };\n  }\n}\n","import { ImageModelV3 } from '@ai-sdk/provider';\nimport { notImplemented } from './not-implemented';\n\nexport class MockImageModelV3 implements ImageModelV3 {\n  readonly specificationVersion = 'v3';\n  readonly provider: ImageModelV3['provider'];\n  readonly modelId: ImageModelV3['modelId'];\n  readonly maxImagesPerCall: ImageModelV3['maxImagesPerCall'];\n\n  doGenerate: ImageModelV3['doGenerate'];\n\n  constructor({\n    provider = 'mock-provider',\n    modelId = 'mock-model-id',\n    maxImagesPerCall = 1,\n    doGenerate = notImplemented,\n  }: {\n    provider?: ImageModelV3['provider'];\n    modelId?: ImageModelV3['modelId'];\n    maxImagesPerCall?: ImageModelV3['maxImagesPerCall'];\n    doGenerate?: ImageModelV3['doGenerate'];\n  } = {}) {\n    this.provider = provider;\n    this.modelId = modelId;\n    this.maxImagesPerCall = maxImagesPerCall;\n    this.doGenerate = doGenerate;\n  }\n}\n","import {\n  LanguageModelV3,\n  LanguageModelV3CallOptions,\n  LanguageModelV3GenerateResult,\n  LanguageModelV3StreamResult,\n} from '@ai-sdk/provider';\nimport { notImplemented } from './not-implemented';\n\nexport class MockLanguageModelV3 implements LanguageModelV3 {\n  readonly specificationVersion = 'v3';\n\n  private _supportedUrls: () => LanguageModelV3['supportedUrls'];\n\n  readonly provider: LanguageModelV3['provider'];\n  readonly modelId: LanguageModelV3['modelId'];\n\n  doGenerate: LanguageModelV3['doGenerate'];\n  doStream: LanguageModelV3['doStream'];\n\n  doGenerateCalls: LanguageModelV3CallOptions[] = [];\n  doStreamCalls: LanguageModelV3CallOptions[] = [];\n\n  constructor({\n    provider = 'mock-provider',\n    modelId = 'mock-model-id',\n    supportedUrls = {},\n    doGenerate = notImplemented,\n    doStream = notImplemented,\n  }: {\n    provider?: LanguageModelV3['provider'];\n    modelId?: LanguageModelV3['modelId'];\n    supportedUrls?:\n      | LanguageModelV3['supportedUrls']\n      | (() => LanguageModelV3['supportedUrls']);\n    doGenerate?:\n      | LanguageModelV3['doGenerate']\n      | LanguageModelV3GenerateResult\n      | LanguageModelV3GenerateResult[];\n    doStream?:\n      | LanguageModelV3['doStream']\n      | LanguageModelV3StreamResult\n      | LanguageModelV3StreamResult[];\n  } = {}) {\n    this.provider = provider;\n    this.modelId = modelId;\n    this.doGenerate = async options => {\n      this.doGenerateCalls.push(options);\n\n      if (typeof doGenerate === 'function') {\n        return doGenerate(options);\n      } else if (Array.isArray(doGenerate)) {\n        return doGenerate[this.doGenerateCalls.length];\n      } else {\n        return doGenerate;\n      }\n    };\n    this.doStream = async options => {\n      this.doStreamCalls.push(options);\n\n      if (typeof doStream === 'function') {\n        return doStream(options);\n      } else if (Array.isArray(doStream)) {\n        return doStream[this.doStreamCalls.length];\n      } else {\n        return doStream;\n      }\n    };\n    this._supportedUrls =\n      typeof supportedUrls === 'function'\n        ? supportedUrls\n        : async () => supportedUrls;\n  }\n\n  get supportedUrls() {\n    return this._supportedUrls();\n  }\n}\n","import {\n  EmbeddingModelV3,\n  ImageModelV3,\n  LanguageModelV3,\n  NoSuchModelError,\n  ProviderV3,\n  SpeechModelV3,\n  TranscriptionModelV3,\n  RerankingModelV3,\n} from '@ai-sdk/provider';\n\nexport class MockProviderV3 implements ProviderV3 {\n  readonly specificationVersion = 'v3' as const;\n\n  languageModel: ProviderV3['languageModel'];\n  embeddingModel: ProviderV3['embeddingModel'];\n  imageModel: ProviderV3['imageModel'];\n  transcriptionModel: ProviderV3['transcriptionModel'];\n  speechModel: ProviderV3['speechModel'];\n  rerankingModel: ProviderV3['rerankingModel'];\n\n  constructor({\n    languageModels,\n    embeddingModels,\n    imageModels,\n    transcriptionModels,\n    speechModels,\n    rerankingModels,\n  }: {\n    languageModels?: Record<string, LanguageModelV3>;\n    embeddingModels?: Record<string, EmbeddingModelV3>;\n    imageModels?: Record<string, ImageModelV3>;\n    transcriptionModels?: Record<string, TranscriptionModelV3>;\n    speechModels?: Record<string, SpeechModelV3>;\n    rerankingModels?: Record<string, RerankingModelV3>;\n  } = {}) {\n    this.languageModel = (modelId: string) => {\n      if (!languageModels?.[modelId]) {\n        throw new NoSuchModelError({ modelId, modelType: 'languageModel' });\n      }\n      return languageModels[modelId];\n    };\n    this.embeddingModel = (modelId: string) => {\n      if (!embeddingModels?.[modelId]) {\n        throw new NoSuchModelError({\n          modelId,\n          modelType: 'embeddingModel',\n        });\n      }\n      return embeddingModels[modelId];\n    };\n    this.imageModel = (modelId: string) => {\n      if (!imageModels?.[modelId]) {\n        throw new NoSuchModelError({ modelId, modelType: 'imageModel' });\n      }\n      return imageModels[modelId];\n    };\n    this.transcriptionModel = (modelId: string) => {\n      if (!transcriptionModels?.[modelId]) {\n        throw new NoSuchModelError({\n          modelId,\n          modelType: 'transcriptionModel',\n        });\n      }\n      return transcriptionModels[modelId];\n    };\n    this.speechModel = (modelId: string): SpeechModelV3 => {\n      if (!speechModels?.[modelId]) {\n        throw new NoSuchModelError({ modelId, modelType: 'speechModel' });\n      }\n      return speechModels[modelId];\n    };\n    this.rerankingModel = (modelId: string) => {\n      if (!rerankingModels?.[modelId]) {\n        throw new NoSuchModelError({ modelId, modelType: 'rerankingModel' });\n      }\n      return rerankingModels[modelId];\n    };\n  }\n}\n","import { SpeechModelV3 } from '@ai-sdk/provider';\nimport { notImplemented } from './not-implemented';\n\nexport class MockSpeechModelV3 implements SpeechModelV3 {\n  readonly specificationVersion = 'v3';\n  readonly provider: SpeechModelV3['provider'];\n  readonly modelId: SpeechModelV3['modelId'];\n\n  doGenerate: SpeechModelV3['doGenerate'];\n\n  constructor({\n    provider = 'mock-provider',\n    modelId = 'mock-model-id',\n    doGenerate = notImplemented,\n  }: {\n    provider?: SpeechModelV3['provider'];\n    modelId?: SpeechModelV3['modelId'];\n    doGenerate?: SpeechModelV3['doGenerate'];\n  } = {}) {\n    this.provider = provider;\n    this.modelId = modelId;\n    this.doGenerate = doGenerate;\n  }\n}\n","import { TranscriptionModelV3 } from '@ai-sdk/provider';\nimport { notImplemented } from './not-implemented';\n\nexport class MockTranscriptionModelV3 implements TranscriptionModelV3 {\n  readonly specificationVersion = 'v3';\n  readonly provider: TranscriptionModelV3['provider'];\n  readonly modelId: TranscriptionModelV3['modelId'];\n\n  doGenerate: TranscriptionModelV3['doGenerate'];\n\n  constructor({\n    provider = 'mock-provider',\n    modelId = 'mock-model-id',\n    doGenerate = notImplemented,\n  }: {\n    provider?: TranscriptionModelV3['provider'];\n    modelId?: TranscriptionModelV3['modelId'];\n    doGenerate?: TranscriptionModelV3['doGenerate'];\n  } = {}) {\n    this.provider = provider;\n    this.modelId = modelId;\n    this.doGenerate = doGenerate;\n  }\n}\n","import { RerankingModelV3 } from '@ai-sdk/provider';\nimport { notImplemented } from './not-implemented';\n\nexport class MockRerankingModelV3 implements RerankingModelV3 {\n  readonly specificationVersion = 'v3';\n\n  readonly provider: RerankingModelV3['provider'];\n  readonly modelId: RerankingModelV3['modelId'];\n\n  doRerank: RerankingModelV3['doRerank'];\n\n  constructor({\n    provider = 'mock-provider',\n    modelId = 'mock-model-id',\n    doRerank = notImplemented,\n  }: {\n    provider?: RerankingModelV3['provider'];\n    modelId?: RerankingModelV3['modelId'];\n    doRerank?: RerankingModelV3['doRerank'];\n  } = {}) {\n    this.provider = provider;\n    this.modelId = modelId;\n    this.doRerank = doRerank;\n  }\n}\n","export function mockValues<T>(...values: T[]): () => T {\n  let counter = 0;\n  return () => values[counter++] ?? values[values.length - 1];\n}\n","import { delay as delayFunction } from '@ai-sdk/provider-utils';\n\n/**\n * Creates a ReadableStream that emits the provided values with an optional delay between each value.\n *\n * @param options - The configuration options\n * @param options.chunks - Array of values to be emitted by the stream\n * @param options.initialDelayInMs - Optional initial delay in milliseconds before emitting the first value (default: 0). Can be set to `null` to skip the initial delay. The difference between `initialDelayInMs: null` and `initialDelayInMs: 0` is that `initialDelayInMs: null` will emit the values without any delay, while `initialDelayInMs: 0` will emit the values with a delay of 0 milliseconds.\n * @param options.chunkDelayInMs - Optional delay in milliseconds between emitting each value (default: 0). Can be set to `null` to skip the delay. The difference between `chunkDelayInMs: null` and `chunkDelayInMs: 0` is that `chunkDelayInMs: null` will emit the values without any delay, while `chunkDelayInMs: 0` will emit the values with a delay of 0 milliseconds.\n * @returns A ReadableStream that emits the provided values\n */\nexport function simulateReadableStream<T>({\n  chunks,\n  initialDelayInMs = 0,\n  chunkDelayInMs = 0,\n  _internal,\n}: {\n  chunks: T[];\n  initialDelayInMs?: number | null;\n  chunkDelayInMs?: number | null;\n  _internal?: {\n    delay?: (ms: number | null) => Promise<void>;\n  };\n}): ReadableStream<T> {\n  const delay = _internal?.delay ?? delayFunction;\n\n  let index = 0;\n\n  return new ReadableStream({\n    async pull(controller) {\n      if (index < chunks.length) {\n        await delay(index === 0 ? initialDelayInMs : chunkDelayInMs);\n        controller.enqueue(chunks[index++]);\n      } else {\n        controller.close();\n      }\n    },\n  });\n}\n"],"mappings":"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","names":["simulateReadableStream","delayFunction","simulateReadableStream"]}